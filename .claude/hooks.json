{
    "hooks": {
        "PreToolUse": [
            {
                "matcher": "Edit|Write|MultiEdit",
                "command": "echo '‚ö° Agent editing: follow AGENTS.md + nearest nested AGENTS.md'"
            }
        ],
        "PostToolUse": [
            {
                "matcher": "Edit|Write|MultiEdit",
                "command": "bash -c 'FILE=\"$CLAUDE_FILE\"; if [ -n \"$FILE\" ]; then LINES=$(wc -l < \"$FILE\" 2>/dev/null || echo 0); if [ \"$LINES\" -gt 500 ]; then echo \"‚ö†Ô∏è  WARNING: $FILE is $LINES lines (target <500)\"; fi; fi'"
            },
            {
                "matcher": "Edit|Write|MultiEdit",
                "type": "prompt",
                "prompt": "Silently check: does this edit follow AGENTS.md conventions (file size <500 LOC, logic in services not routers, data-testid on interactive elements)? Only speak up if there is a clear violation."
            }
        ],
        "SessionStart": [
            {
                "command": "echo 'üöÄ DirectStock | Mode: unrestricted_senior | Policy: AGENTS.md | Entry: llms.txt'"
            }
        ],
        "PreCompact": [
            {
                "command": "echo 'üì¶ Context compaction triggered. Preserve: facts, decisions, constraints, open questions. See docs/agents/compaction-schema.md.'"
            },
            {
                "type": "prompt",
                "prompt": "Before context compaction, extract and preserve a structured summary: (1) established facts about the codebase, (2) decisions made in this session, (3) active constraints, (4) open questions. Format as YAML using the schema from docs/agents/compaction-schema.md."
            }
        ],
        "Stop": [
            {
                "command": "echo 'üèÅ Session ending. Check: docs/agents/decision-log.md (if high-risk actions taken), docs/agents/incident-log.md (if failures occurred), docs/agents/patterns.md (if new patterns discovered).'"
            }
        ],
        "SubagentStop": [
            {
                "type": "prompt",
                "prompt": "Validate the subagent result: (1) Does it include all required handoff fields from docs/agents/handoff-protocol.md? (2) Were verification commands executed? (3) Are there unresolved risks? Flag any gaps before accepting the result."
            }
        ]
    }
}
