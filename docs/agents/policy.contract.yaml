{
  "autonomy_mode": "unrestricted_senior",
  "decision_classes": ["auto_execute", "ask_once"],
  "high_risk_protocol":
    {
      "decision_log_path": "docs/agents/decision-log.md",
      "requires_pre_and_post_entry": true
    },
  "provider_matrix":
    {
      "openai":
        {
          "adapter_file": "CODEX.md",
          "policy_doc": "docs/agents/providers/openai.md",
          "required_capabilities":
            [
              "responses_api",
              "conversation_state",
              "background_mode",
              "mcp_tooling",
              "multi_agent_workflows",
              "codex_app_orchestration",
              "reasoning_effort_tiers"
            ],
          "fallback_order":
            ["AGENTS.md", "docs/agents/providers/openai.md", "CODEX.md"]
        },
      "anthropic":
        {
          "adapter_file": "CLAUDE.md",
          "policy_doc": "docs/agents/providers/anthropic.md",
          "required_capabilities":
            [
              "claude_code_hooks",
              "memory_files",
              "prompt_caching",
              "mcp_connectors",
              "subagent_orchestration",
              "hooks_lifecycle",
              "skills_directory"
            ],
          "fallback_order":
            ["AGENTS.md", "docs/agents/providers/anthropic.md", "CLAUDE.md"]
        },
      "google":
        {
          "adapter_file": "GEMINI.md",
          "policy_doc": "docs/agents/providers/google.md",
          "required_capabilities":
            [
              "adk_workflows",
              "agent_engine_patterns",
              "a2a_interoperability",
              "mcp_tooling",
              "gemini_cli_headless",
              "context_import_directives"
            ],
          "fallback_order":
            ["AGENTS.md", "docs/agents/providers/google.md", "GEMINI.md"]
        }
    },
  "provider_runtime_contracts":
    {
      "openai":
        {
          "required_behaviors":
            [
              "responses_api_first",
              "conversation_state_preserved",
              "background_mode_for_long_tasks",
              "remote_mcp_tooling_supported",
              "tool_result_traceability"
            ],
          "verification_artifacts":
            [
              "docs/agents/providers/openai.md",
              "scripts/check_provider_capabilities.py"
            ]
        },
      "anthropic":
        {
          "required_behaviors":
            [
              "claude_code_hooks_available",
              "memory_files_supported",
              "prompt_caching_supported",
              "mcp_connector_supported",
              "tool_result_traceability"
            ],
          "verification_artifacts":
            [
              "docs/agents/providers/anthropic.md",
              "scripts/check_provider_capabilities.py"
            ]
        },
      "google":
        {
          "required_behaviors":
            [
              "adk_workflows_supported",
              "agent_engine_patterns_supported",
              "a2a_interoperability_supported",
              "mcp_tooling_supported",
              "tool_result_traceability",
              "ui_ux_visual_diff_mandatory",
              "ui_ux_accessibility_gate_mandatory",
              "ui_ux_fallback_sequence_defined",
              "ui_ux_visual_diff_mobile_desktop_mandatory",
              "ui_ux_accessibility_mobile_desktop_mandatory"
            ],
          "verification_artifacts":
            [
              "docs/agents/providers/google.md",
              "scripts/check_provider_capabilities.py",
              "frontend/tests/e2e/visual-baseline.spec.ts",
              "frontend/tests/e2e/a11y-smoke.spec.ts",
              "scripts/check_design_token_drift.sh",
              "scripts/check_mcp_profile_parity.py",
              ".idx/airules.md"
            ]
        }
    },
  "eval_gates":
    [
      "./scripts/agent_governance_check.sh",
      "python3 scripts/agent_policy_lint.py --strict --provider all --format json",
      "python3 scripts/check_provider_capabilities.py --provider all --format json",
      "./scripts/check_gemini_readiness.sh --mode static",
      "python3 scripts/check_mcp_profile_parity.py --strict --format json",
      "cd frontend && npm run test:e2e:a11y -- --project=web-desktop",
      "cd frontend && npm run test:e2e:a11y:mobile",
      "cd frontend && npm run test:e2e:visual -- --project=web-desktop",
      "cd frontend && npm run test:e2e:visual:mobile",
      "./scripts/check_design_token_drift.sh",
      "python3 scripts/generate_repo_index.py --check",
      "python3 scripts/check_entrypoint_coverage.py",
      "MCP_PROFILE=ci-readonly MCP_REQUIRE_POSTGRES_READONLY=1 ./scripts/check_mcp_readiness.sh",
      "./scripts/check_branch_protection.sh"
    ],
  "self_improvement_noise_guard":
    {
      "enabled": true,
      "block_timestamp_only_churn": true,
      "require_semantic_diff_for_pr": true
    },
  "self_improvement_policy":
    {
      "enabled": true,
      "runner_script": "scripts/agent_self_improve.py",
      "max_changes_per_run": 5,
      "touch_allowlist": ["AGENTS", "docs", "scripts", ".agents"],
      "incident_threshold": { "count": 3, "window_days": 14 }
    },
  "required_gates":
    [
      "./scripts/agent_governance_check.sh",
      "python3 scripts/agent_policy_lint.py --strict --provider all --format json",
      "python3 scripts/check_provider_capabilities.py --provider all --format json",
      "./scripts/check_gemini_readiness.sh --mode static",
      "python3 scripts/check_mcp_profile_parity.py --strict --format json",
      "cd frontend && npm run test:e2e:a11y -- --project=web-desktop",
      "cd frontend && npm run test:e2e:a11y:mobile",
      "cd frontend && npm run test:e2e:visual -- --project=web-desktop",
      "cd frontend && npm run test:e2e:visual:mobile",
      "./scripts/check_design_token_drift.sh",
      "python3 scripts/generate_repo_index.py --check",
      "python3 scripts/check_entrypoint_coverage.py",
      "MCP_PROFILE=ci-readonly MCP_REQUIRE_POSTGRES_READONLY=1 ./scripts/check_mcp_readiness.sh",
      "./scripts/check_branch_protection.sh"
    ]
}
